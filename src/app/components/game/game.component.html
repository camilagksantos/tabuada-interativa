<div class="game-container">
    <!-- Header com Nome -->
    <div class="header">
        <h2>Ol√°, {{ nomeJogador }}! üëã</h2>
    </div>

    <!-- Bot√£o Home Flutuante -->
    <button class="btn-home-float" *ngIf="jogoIniciado && !jogoFinalizado" (click)="voltarAoInicio()"
        title="Voltar ao In√≠cio">
        üè†
    </button>

    <!-- Tela de Jogo -->
    <div 
        class="game-card" 
        *ngIf="jogoIniciado && !jogoFinalizado">
        <!-- Barra de Progresso -->
        <div class="progresso-container">
            <div class="progresso-info">
                <span>Quest√£o {{ questoesConcluidas + 1 }} de {{ totalQuestoes }}</span>
                <span>‚≠ê {{ corretos }} | ‚ùå {{ incorretos }}</span>
            </div>
            <div class="barra-progresso">
                <div 
                    class="barra-preenchida" 
                    [style.width.%]="getProgresso()"></div>
            </div>
        </div>

        <!-- Quest√£o -->
        <div class="questao-container">
            <h1 class="questao">{{ numeroAtual }} √ó {{ multiplicadorAtual }} = ?</h1>
        </div>

        <!-- Display da Resposta -->
        <div class="display-resposta">
            <span *ngIf="respostaUsuario; else placeholder">{{ respostaUsuario }}</span>
            <ng-template #placeholder>
                <span class="placeholder">Digite a resposta</span>
            </ng-template>
        </div>

        <!-- Teclado Num√©rico -->
        <div class="teclado-numerico">
            <div class="numeros-grid">
                <button 
                    *ngFor="let num of [1, 2, 3, 4, 5, 6, 7, 8, 9]" class="btn-numero"
                    (click)="adicionarNumero(num)" 
                    [disabled]="botoesDesabilitados">
                    {{ num }}
                </button>
                <button 
                    class="btn-numero btn-especial" 
                    (click)="apagarUltimo()" 
                    [disabled]="botoesDesabilitados">
                    ‚å´
                </button>
                <button 
                    class="btn-numero" 
                    (click)="adicionarNumero(0)" 
                    [disabled]="botoesDesabilitados">
                    0
                </button>
                <button 
                    class="btn-numero btn-especial" 
                    (click)="limparResposta()" 
                    [disabled]="botoesDesabilitados">
                    C
                </button>
            </div>

            <!-- Bot√£o Confirmar -->
            <button 
                class="btn-confirmar" 
                (click)="verificarResposta()"
                [disabled]="botoesDesabilitados || respostaUsuario === ''">
                ‚úì Confirmar
            </button>
        </div>
    </div>

    <!-- Overlay de ACERTO -->
    <div class="feedback-acerto-overlay" *ngIf="mostrarFeedbackAcerto">
        <div class="acerto-content">
            <div class="icone-gigante">‚úì</div>
            <div class="texto-acerto">Correto!</div>
        </div>
        <div class="particula particula-1">üéä</div>
        <div class="particula particula-2">üéâ</div>
        <div class="particula particula-3">‚ú®</div>
        <div class="particula particula-4">‚≠ê</div>
    </div>
    
    <!-- Popup de ERRO -->
    <div class="feedback-erro-overlay" *ngIf="mostrarFeedbackErro">
        <div class="erro-popup">
            <div class="erro-icone">‚ùå</div>
            <h3>Ops!</h3>
            <div class="respostas">
                <div class="resposta-usuario">
                    Voc√™ respondeu: <strong class="errado">{{ respostaUsuario }}</strong>
                </div>
                <div class="resposta-correta">
                    Resposta certa: <strong class="certo">{{ respostaCorreta }}</strong> ‚úì
                </div>
            </div>
            <div class="timer-bar">
                <div class="timer-fill"></div>
            </div>
        </div>
    </div>
    
    <!-- Componente de Feedback - Tela Final -->
    <app-feedback 
        *ngIf="jogoFinalizado" 
        [corretos]="corretos" 
        [incorretos]="incorretos" 
        [totalQuestoes]="totalQuestoes"
        [mensagem]="mensagem" 
        [mensagemCor]="mensagemCor" 
        (reiniciar)="reiniciarJogo()" 
        (voltarHome)="voltarAoInicio()">
    </app-feedback>
</div>